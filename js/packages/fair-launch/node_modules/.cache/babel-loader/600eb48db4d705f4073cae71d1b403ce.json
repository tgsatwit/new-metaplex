{"ast":null,"code":"import React,{useContext,useEffect,useMemo,useRef}from'react';import confetti from'canvas-confetti';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ConfettiContext=/*#__PURE__*/React.createContext(null);export var ConfettiProvider=function ConfettiProvider(_ref){var _ref$children=_ref.children,children=_ref$children===void 0?null:_ref$children;var canvasRef=useRef();var confettiRef=useRef();var dropConfetti=useMemo(function(){return function(){if(confettiRef.current&&canvasRef.current){var _confettiRef$current;canvasRef.current.style.visibility='visible';(_confettiRef$current=confettiRef.current({particleCount:400,spread:160,origin:{y:0.3}}))===null||_confettiRef$current===void 0?void 0:_confettiRef$current.finally(function(){if(canvasRef.current){canvasRef.current.style.visibility='hidden';}});}};},[]);useEffect(function(){if(canvasRef.current&&!confettiRef.current){canvasRef.current.style.visibility='hidden';confettiRef.current=confetti.create(canvasRef.current,{resize:true,useWorker:true});}},[]);var canvasStyle={width:'100vw',height:'100vh',position:'absolute',zIndex:1,top:0,left:0};return/*#__PURE__*/_jsxs(ConfettiContext.Provider,{value:{dropConfetti:dropConfetti},children:[/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:canvasStyle}),children]});};export var Confetti=function Confetti(){var _useConfetti=useConfetti(),dropConfetti=_useConfetti.dropConfetti;useEffect(function(){dropConfetti();},[dropConfetti]);return/*#__PURE__*/_jsx(_Fragment,{});};export var useConfetti=function useConfetti(){var context=useContext(ConfettiContext);return context;};","map":{"version":3,"sources":["/Users/timgillam/Documents/GitHub/metaplex_new/new-metaplex/js/packages/fair-launch/src/confetti.tsx"],"names":["React","useContext","useEffect","useMemo","useRef","confetti","ConfettiContext","createContext","ConfettiProvider","children","canvasRef","confettiRef","dropConfetti","current","style","visibility","particleCount","spread","origin","y","finally","create","resize","useWorker","canvasStyle","width","height","position","zIndex","top","left","Confetti","useConfetti","context"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,OAAvC,CAAgDC,MAAhD,KAA8D,OAA9D,CACA,MAAOC,CAAAA,QAAP,KAAqB,iBAArB,C,6IAMA,GAAMC,CAAAA,eAAe,cAAGN,KAAK,CAACO,aAAN,CAAiD,IAAjD,CAAxB,CAEA,MAAO,IAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAAgC,wBAA7BC,QAA6B,CAA7BA,QAA6B,wBAAlB,IAAkB,eAC9D,GAAMC,CAAAA,SAAS,CAAGN,MAAM,EAAxB,CACA,GAAMO,CAAAA,WAAW,CAAGP,MAAM,EAA1B,CAEA,GAAMQ,CAAAA,YAAY,CAAGT,OAAO,CAC1B,iBAAM,WAAM,CACV,GAAIQ,WAAW,CAACE,OAAZ,EAAuBH,SAAS,CAACG,OAArC,CAA8C,0BAC5CH,SAAS,CAACG,OAAV,CAAkBC,KAAlB,CAAwBC,UAAxB,CAAqC,SAArC,CACA,sBAAAJ,WAAW,CACRE,OADH,CACW,CACPG,aAAa,CAAE,GADR,CAEPC,MAAM,CAAE,GAFD,CAGPC,MAAM,CAAE,CAAEC,CAAC,CAAE,GAAL,CAHD,CADX,qEAMIC,OANJ,CAMY,UAAM,CACd,GAAIV,SAAS,CAACG,OAAd,CAAuB,CACrBH,SAAS,CAACG,OAAV,CAAkBC,KAAlB,CAAwBC,UAAxB,CAAqC,QAArC,CACD,CACF,CAVH,EAWD,CACF,CAfD,EAD0B,CAiB1B,EAjB0B,CAA5B,CAoBAb,SAAS,CAAC,UAAM,CACd,GAAIQ,SAAS,CAACG,OAAV,EAAqB,CAACF,WAAW,CAACE,OAAtC,CAA+C,CAC7CH,SAAS,CAACG,OAAV,CAAkBC,KAAlB,CAAwBC,UAAxB,CAAqC,QAArC,CACAJ,WAAW,CAACE,OAAZ,CAAsBR,QAAQ,CAACgB,MAAT,CAAgBX,SAAS,CAACG,OAA1B,CAAmC,CACvDS,MAAM,CAAE,IAD+C,CAEvDC,SAAS,CAAE,IAF4C,CAAnC,CAAtB,CAID,CACF,CARQ,CAQN,EARM,CAAT,CAUA,GAAMC,CAAAA,WAAgC,CAAG,CACvCC,KAAK,CAAE,OADgC,CAEvCC,MAAM,CAAE,OAF+B,CAGvCC,QAAQ,CAAE,UAH6B,CAIvCC,MAAM,CAAE,CAJ+B,CAKvCC,GAAG,CAAE,CALkC,CAMvCC,IAAI,CAAE,CANiC,CAAzC,CASA,mBACE,MAAC,eAAD,CAAiB,QAAjB,EAA0B,KAAK,CAAE,CAAElB,YAAY,CAAZA,YAAF,CAAjC,wBACE,eAAQ,GAAG,CAAEF,SAAb,CAA+B,KAAK,CAAEc,WAAtC,EADF,CAEGf,QAFH,GADF,CAMD,CAjDM,CAmDP,MAAO,IAAMsB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAC5B,iBAAyBC,WAAW,EAApC,CAAQpB,YAAR,cAAQA,YAAR,CAEAV,SAAS,CAAC,UAAM,CACdU,YAAY,GACb,CAFQ,CAEN,CAACA,YAAD,CAFM,CAAT,CAIA,mBAAO,kBAAP,CACD,CARM,CAUP,MAAO,IAAMoB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CAC/B,GAAMC,CAAAA,OAAO,CAAGhC,UAAU,CAACK,eAAD,CAA1B,CACA,MAAO2B,CAAAA,OAAP,CACD,CAHM","sourcesContent":["import React, { useContext, useEffect, useMemo, useRef } from 'react';\nimport confetti from 'canvas-confetti';\n\nexport interface ConfettiContextState {\n  dropConfetti: () => void;\n}\n\nconst ConfettiContext = React.createContext<ConfettiContextState | null>(null);\n\nexport const ConfettiProvider = ({ children = null as any }) => {\n  const canvasRef = useRef<HTMLCanvasElement>();\n  const confettiRef = useRef<confetti.CreateTypes>();\n\n  const dropConfetti = useMemo(\n    () => () => {\n      if (confettiRef.current && canvasRef.current) {\n        canvasRef.current.style.visibility = 'visible';\n        confettiRef\n          .current({\n            particleCount: 400,\n            spread: 160,\n            origin: { y: 0.3 },\n          })\n          ?.finally(() => {\n            if (canvasRef.current) {\n              canvasRef.current.style.visibility = 'hidden';\n            }\n          });\n      }\n    },\n    [],\n  );\n\n  useEffect(() => {\n    if (canvasRef.current && !confettiRef.current) {\n      canvasRef.current.style.visibility = 'hidden';\n      confettiRef.current = confetti.create(canvasRef.current, {\n        resize: true,\n        useWorker: true,\n      });\n    }\n  }, []);\n\n  const canvasStyle: React.CSSProperties = {\n    width: '100vw',\n    height: '100vh',\n    position: 'absolute',\n    zIndex: 1,\n    top: 0,\n    left: 0,\n  };\n\n  return (\n    <ConfettiContext.Provider value={{ dropConfetti }}>\n      <canvas ref={canvasRef as any} style={canvasStyle} />\n      {children}\n    </ConfettiContext.Provider>\n  );\n};\n\nexport const Confetti = () => {\n  const { dropConfetti } = useConfetti();\n\n  useEffect(() => {\n    dropConfetti();\n  }, [dropConfetti]);\n\n  return <></>;\n};\n\nexport const useConfetti = () => {\n  const context = useContext(ConfettiContext);\n  return context as ConfettiContextState;\n};\n"]},"metadata":{},"sourceType":"module"}